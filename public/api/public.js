"use strict"; var body = $("body"), nav = $("nav"), main = $("main"), footer = $("footer"), _p = $("video") || $("audio"), vBox = $("#vBox"), mTip = $(".tip", vBox), vList = $("#vList"), vInfo = $("#vInfo"), vSub = $("#vSub"), ua = navigator.userAgent, pf = navigator.platform, automate = !1; var _ = { iOS: /iPhone|iPad|iPod/gi.test(pf), highIOS: /OS 1[3-9]/gi.test(ua), wX: /MicroMessenger/gi.test(ua), uC: /ucbrowser|quark/gi.test(ua), lowAndroid: /Android ([2-5])/gi.test(ua), xiaomi: /HM|RedMi|Mi/gi.test(ua) }; function aT(e, t, n, o, i) { $("." + o) && $("." + o).classList.remove(o), e.classList.toggle(o), e.style.zIndex = Math.floor((new Date).getTime() / 1e3), setTimeout((function () { e.classList.remove(o) }), i) } function vShare(e) { e.classList.contains("actived") && e.classList.remove("actived"), e.classList.add("actived"), setTimeout((function () { e.classList.remove("actived") }), 3e3); let t = $("textarea", e); t.innerHTML = "".concat(document.URL, "#\r\n").concat(document.title), t.select(); let n = document.execCommand("copy"); console.log("copy status: ".concat(n)) } function pList() { return $$("input", $("#vList")) } function mType() { $$("source", _p).forEach((e => { console.log(e.src), e.src = e.src.replace(/mp4|m4v|webm/g, "mp3"), e.type = "audio/mp3", _p.load() })) } function historyIndicator() { let e = gS("wLog"); e && pList().map((t => { let n = e[t.value] && e[t.value][playing().lng]; t.dataset.visited = !!n, t.dataset.ended = !!(n && n.count > 0) })) } function tF(e) { let t = ~~(e / 3600), n = ~~(e % 3600 / 60), o = ~~e % 60, i = ""; return t > 0 && (i += t + ":" + (n < 10 ? "0" : "")), i += n + ":" + (o < 10 ? "0" : ""), i += "" + o, i } function aA(e, t) { e.classList.remove(t), window.requestAnimationFrame((function (n) { window.requestAnimationFrame((function (n) { e.classList.add(t) })) })) } function $(e, t) { return t ? t.querySelector(e) : document.querySelector(e) } function $$(e, t) { let n = [], o = t ? t.querySelectorAll(e) : document.querySelectorAll(e); for (let e = 0; e < o.length; e++)n.push(o[e]); return n } function playV(e) { _p.src = up(playing().src, { code: e, automate: automate }, { t: void 0 }), automate = !1, _p.play(), _p.addEventListener("timeupdate", shiftToPoint), $("header").scrollIntoView({ behavior: "smooth" }) } function up(e, t, n) { let o = document.createElement("a"); if (o.href = e || document.URL, null == t && null == n) return { host: o.host, pathname: o.pathname, search: o.search, query: a(o.search, /^\?/), hash: o.hash, frag: a(o.hash.replace(/^#/, ""), /^!/), last: o.pathname.replace(/\/$/, "").split("/").slice(-1)[0] }; let i = "".concat(o.protocol, "//").concat(o.host).concat(o.pathname); if (t) { let e = new URLSearchParams(o.search.slice(1)); for (let n in t) null == t[n] ? e.delete(n) : e.has(n) ? e.set(n, t[n]) : e.append(n, t[n]); let n = e.toString(); "" != n && (i += "?" + n) } if (n) { let e = new URLSearchParams(o.hash.slice(1)); for (let t in n) null == n[t] ? e.delete(t) : e.has(t) ? e.set(t, n[t]) : e.append(t, n[t]); let t = e.toString(); "" != t && (i += "#" + t) } return i; function a(e, t) { let n = {}; return e.replace(t, "").split("&").forEach((function (e) { let t = e.split("="); t[1] && (n[t[0]] = t[1]) })), n } } function playing() { let e = _p.src || _p.currentSrc || $("source", _p).src; return { src: e, code: up(e).query.code, width: up(e).query.width, format: up(e).query.format, lng: up(e).query.lng, video: /video/i.test(_p.tagName) } } function playNext(e) { automate = e; let t = pList().findIndex((e => e.checked)) + 1; pList()[t] ? pList()[t].click() : pList().length > 1 ? pList()[0].click() : (_p.currentTime = 0, _p.play()) } function playPre() { let e = $("input:checked", $("#vList")).parentNode.previousSibling; e && e != $("input:checked", $("#vList")) && e.click() } function jp(e, t, n) { let o = t ? JSON.stringify(t) : JSON.stringify({}), i = e + encodeURIComponent(o); console.log("jp ".concat(i)); let a = new XMLHttpRequest; a.open("GET", i, !0), a.timeout = 3e3, a.onload = function () { a.status >= 200 && a.status < 400 ? n(JSON.parse(a.responseText)) : setTimeout((function () { jp(e, t, n) }), 3e3) }, a.ontimeout = function () { console.log("req timeout: ".concat(i)), jp(e, t, n) }, a.onerror = function () { console.log("req error: ".concat(i)), jp(e, t, n) }, a.send() } function be(e, t, n) { let o = document.createElement(e); for (let e in t) o[e] = t[e]; for (let e in n) o.setAttribute(e, n[e]); return o } function rcn(e) { for (; e.hasChildNodes();)e.removeChild(e.lastChild) } function appendChildren(e, t, n) { let o = document.createDocumentFragment(); return t.forEach((function (e) { o.appendChild(e) })), n && rcn(e), e.appendChild(o), e } function keySort(e, t, n) { return e.sort((function (e, o) { let i = e[t], a = o[t]; return i < a ? n ? -1 : 1 : i > a ? n ? 1 : -1 : 0 })) } function o2a(e) { let t = []; for (let n in e) t.push(e[n]); return t } function gS(e, t) { return JSON.parse(localStorage.getItem(e)) } function sS(e, t) { if (e) return localStorage.setItem(e, JSON.stringify(t)); localStorage.clear() } function randomString(e) { e = e || 16; let t = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", n = t.length, o = ""; for (let i = 0; i < e; i++)o += t.charAt(Math.floor(Math.random() * n)); return o } vList && 0 != pList().length && historyIndicator(); let downloads = [].concat($$('a[href*="download="]'), $$("a[download]")); 